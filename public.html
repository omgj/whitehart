<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Whitehart</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/f34ab3dac3.js"></script>
    <script src="https://js.stripe.com/v3/"></script>

    <style>
body {
    background-color: #222;
}
.left {
    text-align: left;
}
.center {
    text-align: center;
}
.right {
    text-align: right;
}
*:focus {
    outline: none;
}
input {
    background-color: #222;
    font-weight: 100;
    color: ghostwhite;
    border: none;
    font-family: 'Roboto', sans-serif;
    width: 100%;
    letter-spacing: 1.5px;
}
input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button { 
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    margin: 0; 
}
a {
    text-decoration: none !important;
}
 @media (max-width: 500px) {
    #logo {
        height: 30px;
        text-align: center;
        margin-top: 19px;
        margin-bottom: 8px;
        cursor: pointer;
    }
    .menus {
        font-size: 16px;
        font-weight: 300;
    }
    .abcde {
            color: ghostwhite;
            font-weight: 100;
            letter-spacing: 1.5px;
            font-size: 1em;
            font-family: 'Roboto', sans-serif;
}
}
  @media (min-width: 501px) {
    #logo {
        height: 22px;
        text-align: center;
        margin-top: 8px;
        margin-bottom: 8px;
        cursor: pointer;
    }
    .menus {
        font-size: 15px;
        font-weight: 300;
    }
    #addre {
        font-size: 16px;
    }
    .abcde {
            color: ghostwhite;
            font-weight: 100;
            letter-spacing: 1.5px;
            font-size: 1.2em;
            font-family: 'Roboto', sans-serif;
}
}
.fa-cc-mastercard {
    font-size: 20px;
}
    .abcded {
            color: #66BB6A;
            font-weight: 300;
            letter-spacing: 1.5px;
            font-size: .9em;
            font-family: 'Roboto', sans-serif;
}
#addre {
    font-size: 16px;
    color: ghostwhite;
    font-weight: 100;
}
#addre:hover {
    font-weight: 300;
}
.hlog {
    color: #E53935;
    font-weight: 100;
    font-size: .9em;
}
.menus:hover {
    font-weight: 300;
}
.com {
    letter-spacing: 2px;
    cursor: pointer;
    font-family: 'Roboto', sans-serif;
}
#cart {
    font-size: 15px;
    color: #818181;
    font-weight: 100;
}
#regp, #regp::placeholder {
    font-size: 18px;
    color: #414141;
    font-weight: 100;
}
.ider {
    font-size: 16px;
    color: ghostwhite;
    font-weight: 100;
}
.hlog {
    color: #E53935;
    font-weight: 100;
    font-family: 'Roboto', sans-serif;
    font-size: .9em;
    letter-spacing: 2px;
}
.cancel {
    color: #ef9a9a;
    cursor: pointer;
    font-size: 16px;
}
#userrs:hover {
    color: ghostwhite;
}
  #instagram {
    font-size: 20px;
    color: ghostwhite;
}
#facebook {
    font-size: 20px;
    color: ghostwhite;
}
.abcdef {
    color: ghostwhite;
    font-weight: 100;
    font-size: 15px;
}
.fas, .fab {
    font-size: 27px;
    color: #f2f2f2;
}
#unum {
    width: 130px;
    cursor: text;
}
#upwd {
    width: 90px;
    cursor: text;
}
#usms {
    color: #66BB6A;
    font-weight: 300;
    font-size: 15px;
}
#sms:hover {
    font-weight: 400;
}
#ucon {
    color: #66BB6A;
    font-weight: 300;
    font-size: 15px;
}
.txtl {
    color: ghostwhite;
    font-size: 12.5px;
    font-weight: 100;
}
.txtli {
    color: #727272;
    font-size: 13px;
    font-weight: 300;
}
#ucart {
    color: #616161;
    font-weight: 100;
    font-size: 16px;
}
.wer {
    color: #757575;
    font-weight: 100;
    font-size: 16px;
}
#cardlist {
    font-size: 12px;
    color: ghostwhite;
}
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 center">
                <img id="logo" src="http://www.whitehartbar.com.au/images/logo.png" alt="logo">
            </div>
            <div class="col-12 center">
                <a id="addre" class="com" href="https://www.google.com/maps/search/?api=1&query=whitehart+bar">22 Whitehart Lane, Melbourne</a>
            </div>
        </div>
        <div class="row">
            <div class="col-12 center">
                <span id="menu" class="log com">MENU</span>&nbsp;&nbsp;
                <span id="music" class="log com">MUSIC</span>&nbsp;&nbsp;
                <span id="events" class="log com">EVENTS</span>&nbsp;&nbsp;
                <input id="unum" class="com" type="text" autocomplete="off" placeholder="0480019099" maxlength="10" />
                <input id="upwd" type="text" class="com" autocomplete="off" placeholder="219663" maxlength="6" />
                <span id="usms" class="com">&nbsp;&nbsp;SMS</span>
                <span id="ucon" class="com">&nbsp;&nbsp;CONFIRM</span>
                <span id="ucart" class="com">$0.00</span>
            </div>
        </div>
        <div id="menub">
            <div class="row justify-content-center">
                    <span class="abcdef com">Tap</span>&nbsp;&nbsp;
                    <span class="abcdef com">Beer</span>&nbsp;&nbsp;
                    <span class="abcdef com">Wine</span>&nbsp;&nbsp;
                    <span class="abcdef com">Cocktails</span>&nbsp;&nbsp;
                    <span class="abcdef com">Spirits</span>&nbsp;&nbsp;
                    <span class="abcdef com">Bottles</span>&nbsp;&nbsp;
                    <span class="abcdef com">Cans</span>&nbsp;&nbsp;
                    <span class="abcdef com">Eat</span>
            </div>
        </div>
        <div id="musicb">
            <div class="row">
                <div class="col-12">
                    <span class="log">music</span>
                </div>
            </div>
        </div>
        <div id="eventsb">
            <div class="row">
                <div class="col-12">
                    <span class="log">events</span>
                </div>
            </div>
        </div>
        <div id="userb">
            <div id="stripehider">
                    <div class="row justify-content-center">
                        <div id="stripeadd" class="col-12 col-md-4 col-lg-3">
                            <div id="card-el"></div>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="center col-12 col-md-4 col-lg-3">
                            <span id="stripecon" class="abcded">+Add Card</span>
                        </div>
                    </div>
                </div>
                <div id="stripeprogress" class="row justify-content-center">
                    <div class="center col-12 col-md-4 col-lg-3 abcde">Confirming 2847 ...</div>
                </div>
                <div id="userhider" class="row justify-content-center">
                    <div class="col-5 col-md-2 col-lg-2 txtli">Card <span class="hlog">DEL</span></div>
                    <div id="usercard" class="right col-5 col-md-2 col-lg-2 abcde"></div>
                </div>
            <div class="row justify-content-center">
                <div class="col-6">
                    <span class="com wer">NUMBER</span>
                </div>
                <div class="col-6 right">
                    <span id="uid" class="com ider">0415 689 049</span>
                </div>
            </div>
        </div>
        <div id="pub">
            <div class="row">
                <div class="col-12">&nbsp;</div>
            </div>
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 col-lg-6 center">
                    <p class="abcde center">The white hart has always been a creature of myth and legend.</p>
                    <p class="abcde center">The ancient Celts saw it as a harbinger of doom. The French believed that to harm a white hart meant to be eternally cursed with the pain of unrequited love. The Scots saw it as a symbol of purity, redemption and good fortune.</p>
                    <p class="abcde center">But you don't have to worry about any of that because in Melbourne, it means only one thing - an all encompassing gathering space with great music, the finest craft beers and cocktails, boutique wines, great food and a kaleidoscopic visual feast of projections and graffiti.</p>
                    <p class="abcde center">Located in the heart of the city in a converted car park at the end of Whitehart Lane is a unique green zone with an industrial edge â€“ a place to party, or just relax and talk at the end of the day.</p> 
                    <p class="abcde center">Melbournes CBD now has a WHITE HART.</p>  
                </div>
            </div>
            <div class="row">
                <div class="col-12 center">
                    <span id="instagram" class="com"><a href="https://www.instagram.com/whitehartmelbourne/?hl=en"><i class="fab fa-instagram"></i></a></span>&nbsp;&nbsp;
                    <span id="facebook" class="com"><a href="https://www.facebook.com/whitehartmelbourne/"><i class="fab fa-facebook"></i></a></span>
                    <span id="ulo" class="hlog com">&nbsp;&nbsp;LOGOUT</span>
                </div>
            </div>    
        </div>
    </div>

    <script>

        var stripe = Stripe('pk_test_GPgyjS10UYvfK0yYzmg6FQz5');
        var elements = stripe.elements();

        var style = {
                        base: {
                            color: '#f4f4f4',
                            fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
                            fontSmoothing: 'antialiased',
                            fontSize: '16px',
                            fontWeight: '100',
                            letterSpacing: '1.7px',
                            '::placeholder': {
                            color: '#757575',
                            fontWeight: '100',
                            letterSpacing: '1.7px',
                            }
                        },
                        invalid: {
                            color: '#E53935',
                            iconColor: '#fa755a'
                        }
                    };

        var card = elements.create('card', {style: style});

        card.mount("#card-el");

        $("#stripecon").click(function() {
            stripe.createToken(card).then(function(result) {
                if (result.error) {
                    console.log(result.error);
                    return
                }
                $("#stripehider").hide()
                $("#stripeprogress").show();
                var fd = new FormData();
                fd.append("token", result.token.id)
                fetch("/cardtoken", {
                    method: "post",
                    body: fd,
                }).then(function(response) {
                    response.text().then(function(text) {
                        if (text == "err") {
                            console.log("err");
                            return
                        }
                        $("#stripeprogress").hide();
                        $("#userhider").show();
                        $("#usercard").text(text);
                    });
                }).catch(function(err) {
                    console.log(err);
                });
            });
        });
        $("#stripeprogress").hide();
        $("#userhider").hide();
        $("#upwd").hide();
        $("#logoutb").hide();
        $("#cart").hide();
        $("#uid").hide();
        $("#unum").hide();
        $("#upwd").hide();
        $("#usms").hide();
        $("#ucon").hide();
        $("#ucart").hide();

        $("#musicb").hide();
        $("#menub").hide();
        $("#userb").hide();
        $("#eventsb").hide();

        window.onload = function() {
            fetch("/whoami", {
                method: "get",
            }).then(function(response) {
                if (response.status !== 200) {
                    console.log("error");
                    return;
                }
                response.text().then(function(text) {
                    if (text == "none") {
                        $("#unum").show();
                        return;
                    }
                    $("#ucart").show()
                    $("#ulo").show()
                    $("#uid").show();
                    $("#uid").text(text);
                });
            }).catch(function(err) {
                console.log(err);
            });
        };

        $("#unum").keyup(function() {
            var a = $("#unum").val();
            if ((a.length == 10) && (a.includes("04"))) {
                $("#usms").show();
                return;
            }
            $("#usms").hide();
        });
        $("#upwd").keyup(function() {
            var a = $("#upwd").val();
            if (a.length>=5) {
                $("#ucon").show();
                return;
            }
            $("#ucon").hide();
        });

        $("#logo").click(function() {
            $("#musicb").hide();
            $("#menub").hide();
            $("#eventsb").hide();
            $("#userb").hide();
            $("#pub").show();
        });
        $("#events").click(function() {
            $("#pub").hide();
            $("#musicb").hide();
            $("#menub").hide();
            $("#userb").hide();
            $("#eventsb").show();
        });
        $("#menu").click(function() {
            $("#pub").hide();
            $("#musicb").hide();
            $("#userb").hide();
            $("#eventsb").hide();
            $("#menub").show();
        });
        $("#music").click(function() {
            $("#pub").hide();
            $("#menub").hide();
            $("#userb").hide();
            $("#eventsb").hide();
            $("#musicb").show();
        });
        $("#ucart").click(function() {
            $("#pub").hide();
            $("#musicb").hide();
            $("#eventsb").hide();
            $("#menub").hide();
            $("#userb").show();
        });
        $("#usms").click(function() {
            var num = $("#unum").val();
            if (num.includes("04") && num.length == 10) {
                var formdata = new FormData();
                formdata.append("numuser", num);
                fetch("/txtpwd", {
                    method: "post",
                    body: formdata,
                }).then(function(response) {
                    if (response.status !== 200) {
                        console.log("problem: "+response.Status);
                        return;
                    }
                    response.text().then(function(text) {
                        if (text == "err") {
                            console.log("error");
                            return;
                        }
                        $("#unum").hide();
                        $("#usms").hide();
                        $("#upwd").show();
                    });
                }).catch(function(err) {
                    console.log(err);
                    return;
                });
                return;
            }
            $("#unum").focus();
        });
        $("#ucon").click(function() {
            var a = $("#upwd").val();
            var num = $("#unum").val();
            var aa = new FormData();
            aa.append("number", num);
            aa.append("code", a);
            fetch("/codeconf", {
                method: "post",
                body: aa,
            }).then(function(response) {
                if (response.status !== 200) {
                    console.log("error");
                    return;
                }
                response.text().then(function(text) {
                    if (text == "err") {
                        console.log("err");
                        return;
                    }
                    location.reload(true);
                });
            })
            .catch(function(err) {
                console.log(err);
            });
        });
        $("#ulo").click(function() {
            fetch("/logout", {
                method: "get",
            }).then(function(response) {
                if (response.status !== 200) {
                    console.log("error");
                    return;
                }
                response.text().then(function(text) {
                    if (text == "ok") {
                        location.reload(true);
                        return;
                    }
                    console.log(text);
                })
            }).catch(function(err) {
                console.log(err);
            });
        });
    </script>
</body>
</html>
